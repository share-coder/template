<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" th:replace="base::layout(~{::section})">
<head>
    <meta charset="UTF-8">
    <title>Change Password Page</title>
</head>
<body>
<section>
    <div class="container p-5">
        <div class="row">
            <div class="col-md-6 offset-md-3">
                <div class="card">
                    <div class="card-header text-center fs-4">Change Password</div>
                    <th:block th:if="${session.msg}">
                        <p class="text-center fs-3 text-success">[[${session.msg}]]</p>
                        <th:block th:text="${@sessionHelper.removeMessageFromSession()}"></th:block>
                    </th:block>
                    <div class="card-body">
                        <form action="/user/updatePassword" method="post">
                            <div class="mb-3">
                                <label for="oldPassInput">Old Password</label>
                                <div class="input-group">
                                    <input type="password" name="oldPass" id="oldPassInput" class="form-control">
                                    <button type="button" class="btn btn-outline-secondary" id="togglePasswordBtn" tabindex="-1" aria-label="Show/Hide password">
                                        <svg id="eyeIcon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-eye" viewBox="0 0 16 16">
                                            <path d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zm-8 4.5c-3.5 0-6.5-3.5-6.5-3.5S4.5 4.5 8 4.5s6.5 3.5 6.5 3.5-3 3.5-6.5 3.5z"/>
                                            <path d="M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zm0 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z"/>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                            <div class="mb-3">
                                <label for="oldPassInput">New Password</label>
                                <div class="input-group">
                                    <input type="password" name="newPass" id="newPassInput" class="form-control">
                                    <button type="button" class="btn btn-outline-secondary" id="togglePasswordBtn1" tabindex="-1">
                                        <svg id="eyeIcon1" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-eye" viewBox="0 0 16 16">
                                            <path d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zm-8 4.5c-3.5 0-6.5-3.5-6.5-3.5S4.5 4.5 8 4.5s6.5 3.5 6.5 3.5-3 3.5-6.5 3.5z"/>
                                            <path d="M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zm0 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z"/>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                            <div class="d-flex justify-content-end gap-2">
                                <button class="btn btn-primary">Change Password</button>
                                <a th:href="@{/}" class="btn btn-secondary">Cancel</a>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        // Toggle old password visibility
        document.addEventListener('DOMContentLoaded', function() {
            const toggleBtn = document.getElementById('togglePasswordBtn');
            const passInput = document.getElementById('oldPassInput');
            const eyeIcon = document.getElementById('eyeIcon');
            toggleBtn.addEventListener('click', function() {
                const type = passInput.type === 'password' ? 'text' : 'password';
                passInput.type = type;
                eyeIcon.classList.toggle('bi-eye');
                eyeIcon.classList.toggle('bi-eye-slash');
            });

            // Toggle new password visibility
            const toggleBtn1 = document.getElementById('togglePasswordBtn1');
            const passInput1 = document.getElementById('newPassInput');
            const eyeIcon1 = document.getElementById('eyeIcon1');
            toggleBtn1.addEventListener('click', function() {
                const type = passInput1.type === 'password' ? 'text' : 'password';
                passInput1.type = type;
                eyeIcon1.classList.toggle('bi-eye');
                eyeIcon1.classList.toggle('bi-eye-slash');
            });
        });
    </script>
    </script>
</section>
</body>
</html>