<!DOCTYPE html>
<html lang="en" xmlns:th="http://thymeleaf.org"
      th:replace="base::layout(~{::section})">
<head>
    <meta charset="UTF-8">
    <title>Login</title>
</head>
<body>
<section class="container mt-5 mb-5">
    <div class="row justify-content-center mb-5">
        <div class="col-md-4 bg-white p-4 shadow-lg rounded">
            <h3 class="text-center text-primary mb-4">Login</h3>

            <form th:action="userLogin" method="post">
                <div class="mb-3">
                    <label for="emailInput" class="form-label">Email<span style="color: red">*</span></label>
                    <input type="text" id="emailInput" name="username" value="test@email.com" class="form-control">
                    <div th:if="${emailError}" id="emailError" class="text-danger mt-1" th:text="${emailError}"></div>
                </div>
                <div class="mb-3 col-md-12 position-relative">
                    <label for="passwordInput" class="form-label">Password<span style="color: red">*</span></label>
                    <div class="input-group">
                        <input type="password" id="passwordInput" name="password" value="test123" class="form-control">
                        <button type="button" class="btn btn-outline-secondary" id="togglePasswordBtn" tabindex="-1">
                            <svg id="eyeIcon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-eye" viewBox="0 0 16 16">
                                <path d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zm-8 4.5c-3.5 0-6.5-3.5-6.5-3.5S4.5 4.5 8 4.5s6.5 3.5 6.5 3.5-3 3.5-6.5 3.5z"/>
                                <path d="M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zm0 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z"/>
                            </svg>
                        </button>
                    </div>
                    <div th:if="${passwordError}" class="text-danger mt-1" th:text="${passwordError}"></div>
                </div>
                <script>
                    document.getElementById('togglePasswordBtn').addEventListener('click', function () {
                        const input = document.getElementById('passwordInput');
                        const icon = document.getElementById('eyeIcon');
                        if (input.type === 'password') {
                            input.type = 'text';
                            icon.classList.remove('bi-eye');
                            icon.classList.add('bi-eye-slash');
                            icon.innerHTML = '<path d="M13.359 11.238l2.147 2.147a.5.5 0 0 1-.708.708l-2.147-2.147A7.97 7.97 0 0 1 8 13.5c-5 0-8-5.5-8-5.5a15.634 15.634 0 0 1 3.273-3.905l-2.02-2.02a.5.5 0 1 1 .708-.708l14 14a.5.5 0 0 1-.708.708l-2.02-2.02z"/><path d="M11.354 8.354a3 3 0 0 0-4.708-4.708l1.06 1.06a2 2 0 0 1 2.588 2.588l1.06 1.06z"/>';
                        } else {
                            input.type = 'password';
                            icon.classList.remove('bi-eye-slash');
                            icon.classList.add('bi-eye');
                            icon.innerHTML = '<path d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zm-8 4.5c-3.5 0-6.5-3.5-6.5-3.5S4.5 4.5 8 4.5s6.5 3.5 6.5 3.5-3 3.5-6.5 3.5z"/><path d="M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zm0 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z"/>';
                        }
                    });
                </script>


                <!-- Forgot Password -->
                <div class="text-end mb-3">
                    <a href="loadForgotPassword" class="text-decoration-none small">Forgot Password?</a>
                </div>

                <!-- Buttons Row -->
                <div class="d-flex justify-content-between">
                    <!--                    <button type="submit" class="btn btn-primary col-12">Login</button>-->
                    <button class="btn btn-primary col-12">Login</button>
                    <!--                    <a href="/" class="btn btn-secondary col-5">Cancel</a>-->
                </div>

                <!-- Signup and Terms -->
                <div class="text-center mt-3">
                    <p class="mb-1">
                        Don’t have an account?
                        <a href="/register" class="text-decoration-none">Sign up</a>
                    </p>
                    <p class="text-muted small">
                        By signing in, I accept Template’s
                        <a href="/terms" class="text-decoration-none">Terms of Use</a> &
                        <a href="/privacy" class="text-decoration-none">Privacy Policy</a>.
                    </p>
                </div>
            </form>
        </div>
    </div>
    <!-- When I press escape button then I should cancel the screen -->
    <script>
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                window.location.href = '/';
            }
        });
    </script>
</section>
</body>
</html>
